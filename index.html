<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palpite Royale</title>
    <link rel="icon" type="image/jpeg" href="./img/fav-icon.jpg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="text-slate-100 antialiased">
    <!-- Fundo -->
    <div class="fixed inset-0 -z-10 bg-radial"></div>

    <main class="container mx-auto p-4 flex flex-col items-center min-h-screen">
        <header id="main-header" class="text-center my-6">
            <img src="./img/logo.png" alt="Logotipo do Palpite Royale" class="mx-auto mb-4 w-80 sm:w-96 h-auto">
            <p class="text-slate-300 mt-2 text-shadow">Adivinhe a carta de CLASH!</p>
        </header>

        <!-- Menu Principal Reformulado -->
        <section id="main-menu" class="w-full max-w-4xl flex flex-col items-center gap-4 mt-8 px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12 w-full">
                <!-- Card Modo Clássico (Um Jogador) -->
                <div class="mode-card" onclick="document.getElementById('one-player-btn').click();">
                    <div class="mode-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-full h-full"><path fill="currentColor" d="M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5m14 3c0 .6-.4 1-1 1H6c-.6 0-1-.4-1-1v-1h14v1Z"/></svg>
                    </div>
                    <h2 class="mode-card-title">Modo Clássico</h2>
                    <p class="mode-card-description">Teste seu conhecimento e adivinhe a carta secreta. Um desafio solo contra suas próprias deduções!</p>
                    <button id="one-player-btn" class="mode-card-button">
                        Jogar
                    </button>
                </div>
        
                <!-- Card Batalha 1v1 (Dois Jogadores) -->
                <div class="mode-card" onclick="document.getElementById('two-player-btn').click();">
                    <div class="mode-card-icon">
                        <svg xmlns="http://www.w.org/2000/svg" viewBox="0 0 24 24" class="w-full h-full"><path fill="currentColor" d="M4.14 4.14L2.16 6.12l2.69 2.7l.71.7l-2.12 2.13l1.41 1.41l2.12-2.12l.71.71l2.69 2.69l1.98-1.98L4.14 4.14m12.72 12.72l2.12-2.12l-2.69-2.7l-.71-.7l2.12-2.12l-1.41-1.41l-2.12 2.12l-.71-.71l-2.69-2.69l-1.98 1.98l10.25 10.25M6.57 20.84L2.12 16.4l5.66-5.66l4.44 4.44l-5.65 5.66m11.31-11.31L12.2 15.2l-4.44-4.44l5.68-5.66l4.42 4.42Z"/></svg>
                    </div>
                    <h2 class="mode-card-title">Batalha 1v1</h2>
                    <p class="mode-card-description">Desafie um amigo ou um oponente aleatório para ver quem descobre a carta secreta primeiro. Que vença o melhor!</p>
                    <button id="two-player-btn" class="mode-card-button">
                        Batalhar
                    </button>
                </div>
            </div>
        </section>

        <!-- Lobby Dois Jogadores -->
        <section id="two-player-lobby" class="w-full max-w-2xl flex-col items-center gap-4 mt-8 hidden">
            <div class="w-full p-4 sm:p-6 game-container">
                <button id="back-to-menu-lobby-btn" title="Voltar ao Menu Principal" class="absolute top-3 right-3 sm:top-4 sm:right-4 text-slate-400 hover:text-yellow-400 transition-colors z-30">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z" />
                    </svg>
                </button>
                <div class="flex justify-center border-b border-slate-600 mb-6">
                    <button id="show-create-game-btn" class="lobby-tab-btn active" data-view="create-game-view">Criar Jogo</button>
                    <button id="show-join-game-btn" class="lobby-tab-btn" data-view="join-game-view">Entrar no Jogo</button>
                </div>

                <!-- View de Criar Jogo -->
                <div id="create-game-view">
                    <!-- Nova Seção de Lobby/Pronto -->
                    <div id="game-lobby-section" class="hidden">
                        <div class="text-center mb-6">
                            <p class="text-slate-300 mb-2">Compartilhe este código com seu amigo:</p>
                            <div class="flex items-center justify-center gap-2">
                                <span id="lobby-game-code-display" class="font-mono"></span>
                                <button id="lobby-copy-code-btn" title="Copiar Código" class="p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                                </button>
                            </div>
                        </div>
                        <h3 class="text-2xl font-bold text-center mb-4 text-yellow-400">Jogadores na Sala</h3>
                        <div id="player-list" class="space-y-3 mb-6 bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                            <!-- Slots de jogador injetados aqui -->
                        </div>
                        <button id="toggle-ready-btn" class="w-full px-6 py-4 bg-green-600 text-white font-bold rounded-lg text-xl hover:bg-green-500 transition-transform hover:scale-105">
                            Estou Pronto
                        </button>
                    </div>
                    
                    <!-- Seção de Configurações do Jogo -->
                    <div id="game-settings-section">
                        <h3 class="text-2xl font-bold text-center mb-4 text-yellow-400">Opções da Partida</h3>
                        <div class="space-y-6">
                             <div>
                                <label for="max-attempts-slider" class="flex justify-between items-center text-lg mb-2">
                                    <span>Tentativas</span>
                                    <span id="max-attempts-value" class="font-bold text-yellow-300 text-xl">15</span>
                                </label>
                                <input type="range" id="max-attempts-slider" min="5" max="20" value="15" class="w-full h-3 bg-slate-700 rounded-lg appearance-none cursor-pointer range-lg">
                            </div>

                            <div class="flex justify-between items-center">
                                <label for="hints-enabled-toggle" class="text-lg">Dicas</label>
                                <label class="inline-flex items-center cursor-pointer">
                                  <input type="checkbox" id="hints-enabled-toggle" class="sr-only peer" checked>
                                  <div class="relative w-14 h-8 bg-slate-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:start-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-600"></div>
                                </label>
                            </div>

                            <div class="flex justify-between items-center">
                                <label for="is-public-toggle" class="text-lg">Partida Pública</label>
                                <label class="inline-flex items-center cursor-pointer">
                                  <input type="checkbox" id="is-public-toggle" class="sr-only peer" checked>
                                  <div class="relative w-14 h-8 bg-slate-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:start-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                        </div>
                        <button id="create-game-btn" class="mt-8 w-full px-6 py-4 bg-yellow-500 text-slate-900 font-bold rounded-lg text-xl hover:bg-yellow-400 transition-transform hover:scale-105">
                            Criar e Aguardar
                        </button>
                    </div>
                </div>

                <!-- View de Entrar no Jogo -->
                <div id="join-game-view" class="hidden">
                     <div class="mb-6">
                        <label for="join-code-input" class="text-lg mb-2 block">Entrar com Código</label>
                        <div class="flex flex-col sm:flex-row gap-2">
                             <input type="text" id="join-code-input" placeholder="Cole o código aqui..." class="w-full sm:flex-grow p-3 bg-slate-800 border-2 border-slate-600 rounded-lg text-lg text-white focus:outline-none focus:border-yellow-500 transition-colors">
                             <button id="join-by-code-btn" class="w-full sm:w-auto px-6 py-3 bg-yellow-500 text-slate-900 font-bold rounded-lg hover:bg-yellow-400">Entrar</button>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-yellow-400">Partidas Públicas</h3>
                            <button id="refresh-public-games-btn" title="Atualizar Lista" class="p-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors">
                                 <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0120.5 16" /></svg>
                            </button>
                        </div>
                        <ul id="public-games-list" class="space-y-2 h-48 overflow-y-auto bg-slate-900/50 p-2 rounded-lg border border-slate-700">
                           <!-- Lista de jogos públicos aqui -->
                           <li id="no-public-games" class="text-center text-slate-400 p-4">Nenhuma partida pública encontrada.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- CONTEÚDO DO JOGO UM JOGADOR -->
        <div id="single-player-game-content" class="w-full max-w-4xl game-container p-4 sm:p-6 hidden relative">
            
            <button id="back-to-menu-ingame-btn" title="Voltar ao Menu Principal" class="absolute top-3 right-3 sm:top-4 sm:right-4 text-slate-400 hover:text-yellow-400 transition-colors z-30">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z" />
                </svg>
            </button>

             <!-- Contador de Tentativas 1P -->
            <div id="sp-turn-info" class="text-center mb-4">
                <p class="text-slate-400 text-sm">Tentativa</p>
                <p id="sp-turn-counter-display" class="text-4xl font-bold text-green-400 transition-colors duration-500">
                    <span id="sp-current-attempt">1</span> / <span id="sp-max-attempts">15</span>
                </p>
            </div>

            <!-- Área de Busca -->
            <section id="search-section" class="w-full max-w-2xl mx-auto relative mb-6">
                <div class="relative">
                    <input type="text" id="search-input" placeholder="Digite o nome de uma carta..." 
                           class="w-full p-4 pl-4 bg-slate-800/80 border-2 border-yellow-800/80 rounded-lg text-lg text-white focus:outline-none focus:border-[var(--color-interact)] transition-all" autocomplete="off">
                    <!-- Lista de sugestões -->
                    <ul id="suggestions-list" class="absolute top-full left-0 right-0 mt-2 bg-slate-800 border-2 border-slate-600 rounded-lg z-20 hidden max-h-60 overflow-y-auto"></ul>
                </div>
            </section>
            
            <!-- Notificação de Jogo -->
            <div id="game-notification" class="hidden text-center p-4 bg-blue-900/50 border-2 border-blue-500 rounded-lg mb-6">
                <p id="game-notification-text" class="text-lg font-bold"></p>
            </div>

            <!-- Mensagem de Vitória/Derrota -->
            <div id="game-over-msg" class="hidden text-center p-4 bg-slate-800 border-2 border-slate-600 rounded-lg mb-6">
                <h2 id="end-title" class="text-2xl font-bold"></h2>
                <div class="mt-6 flex flex-col sm:flex-row gap-3 justify-center">
                    <button id="defeat-play-again-btn" class="px-6 py-3 bg-yellow-500 text-slate-900 font-bold rounded-lg hover:bg-yellow-400 transition-transform hover:scale-105">Jogar Novamente</button>
                    <button id="defeat-back-to-menu-btn" class="px-6 py-3 bg-slate-600 text-slate-200 font-bold rounded-lg hover:bg-slate-500 transition-transform hover:scale-105">Menu Principal</button>
                </div>
            </div>

            <!-- Dicas (Baús) -->
            <section id="sp-hints-container" class="flex justify-center gap-4 mb-6 flex-wrap">
                <!-- Injetado via JS -->
            </section>

            <!-- Grid de Palpites -->
            <section class="w-full overflow-x-auto flex justify-center">
                <div class="inline-block">
                    <div class="grid grid-cols-[80px_repeat(5,72px)] sm:grid-cols-[112px_repeat(5,112px)] gap-1 sm:gap-2 text-center font-bold text-slate-300 p-1 sm:p-2 text-xs sm:text-sm">
                        <span>Carta</span>
                        <span>Custo</span>
                        <span>Raridade</span>
                        <span>Tipo</span>
                        <span>Arena</span>
                        <span>Evolução</span>
                    </div>
                    <div id="sp-guesses-list" class="space-y-2">
                        <!-- Palpites entram aqui via JS -->
                    </div>
                </div>
            </section>
        </div>

        <!-- CONTEÚDO DO JOGO DOIS JOGADORES -->
        <div id="two-player-game-content" class="w-full max-w-7xl hidden relative">
             <button id="tp-back-to-menu-btn" title="Sair da Partida" class="absolute top-2 right-2 sm:top-4 sm:right-4 text-slate-400 hover:text-red-500 transition-colors z-30">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                   <path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                </svg>
            </button>
            
            <!-- Navegação Mobile 2P -->
            <div id="tp-mobile-nav" class="mb-4 flex lg:hidden border-b-2 border-slate-700">
                <button id="tp-show-my-view-btn" class="tp-mobile-tab active">Seu Jogo</button>
                <button id="tp-show-opponent-view-btn" class="tp-mobile-tab">Oponente</button>
            </div>
            
            <div id="battle-arena" class="flex flex-col lg:flex-row gap-4">
                
                <!-- Painel do Jogador -->
                <div id="my-player-panel" class="battle-panel">
                    <h2 class="player-panel-title">Você</h2>
                    <div id="my-guesses-list" class="guesses-list-2p">
                        <!-- Palpites do jogador aqui -->
                    </div>
                </div>

                <!-- Painel Central de Informações -->
                <div id="central-info-panel" class="central-panel">
                    <div class="flex items-center gap-2 sm:gap-4">
                        <div id="turn-info" class="text-center">
                            <p class="text-slate-400 text-xs sm:text-sm">Turno</p>
                            <p id="turn-counter-display" class="font-bold flex items-baseline justify-center gap-x-1">
                                <span id="turn-counter" class="text-3xl sm:text-4xl text-green-400 transition-colors duration-500">1</span>
                                <span class="text-xl sm:text-2xl text-slate-400">/<span id="max-attempts-display">20</span></span>
                            </p>
                        </div>
                         <div id="turn-timer" class="hidden text-center">
                            <p class="text-xs sm:text-sm text-slate-400">Tempo Restante</p>
                            <p id="timer-countdown" class="text-2xl sm:text-3xl font-bold text-red-500 animate-pulse">30</p>
                        </div>
                    </div>
                    <div id="tp-hints-container" class="flex flex-col items-center gap-4 mt-4">
                        <!-- Dicas do 2P aqui -->
                    </div>
                </div>

                <!-- Painel do Oponente -->
                <div id="opponent-player-panel" class="battle-panel hidden lg:flex">
                     <h2 class="player-panel-title">Oponente</h2>
                     <div id="opponent-guesses-list" class="guesses-list-2p">
                        <!-- Palpites do oponente aqui -->
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Victory Modal -->
    <div id="victory-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <!-- Overlay -->
        <div class="absolute inset-0 bg-black/70 backdrop-blur-sm"></div>
        
        <!-- Modal Content -->
        <div id="victory-content" class="relative bg-slate-800 border-2 border-yellow-500 rounded-2xl w-full max-w-md text-center p-6 sm:p-8 transform transition-all">
            <h2 class="text-5xl font-clash-title text-yellow-400 text-shadow mb-4">VITÓRIA!</h2>
            
            <div class="my-6 flex flex-col items-center">
                 <img id="victory-card-image" src="" alt="Carta Vencedora" class="w-32 h-auto object-contain drop-shadow-[0_10px_15px_rgba(250,204,21,0.4)]"/>
                 <h3 id="victory-card-name" class="mt-4 text-2xl font-clash font-bold"></h3>
            </div>
           
            <p id="victory-attempts" class="text-slate-300 text-lg mb-8"></p>

            <div class="w-full flex flex-col sm:flex-row gap-3">
                <button id="victory-play-again-btn" class="w-full px-6 py-3 bg-yellow-500 text-slate-900 font-bold rounded-lg text-xl hover:bg-yellow-400 transition-transform hover:scale-105">
                    Jogar Novamente
                </button>
                <button id="victory-back-to-menu-btn" class="w-full px-6 py-3 bg-slate-600 text-slate-200 font-bold rounded-lg text-xl hover:bg-slate-500 transition-transform hover:scale-105">
                    Menu Principal
                </button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <!-- Overlay -->
        <div class="absolute inset-0 bg-black/70 backdrop-blur-sm"></div>
        
        <!-- Modal Content -->
        <div id="confirmation-content" class="relative bg-slate-800 border-2 border-slate-600 rounded-2xl w-full max-w-sm text-center p-6 sm:p-8 transform transition-all">
            <h2 id="confirmation-title" class="text-3xl font-clash-title text-yellow-400 text-shadow mb-4">Atenção</h2>
            <p id="confirmation-message" class="text-slate-300 text-lg mb-8"></p>

            <div class="w-full flex flex-col sm:flex-row gap-3">
                <button id="confirm-action-btn" class="w-full px-6 py-3 bg-red-600 text-white font-bold rounded-lg text-xl hover:bg-red-500 transition-transform hover:scale-105">
                    Sair
                </button>
                <button id="cancel-action-btn" class="w-full px-6 py-3 bg-slate-600 text-slate-200 font-bold rounded-lg text-xl hover:bg-slate-500 transition-transform hover:scale-105">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast-notification" class="fixed bottom-5 right-5 bg-red-600 text-white py-3 px-5 rounded-lg shadow-lg transform translate-x-full opacity-0 transition-all duration-500 ease-out z-50">
        <p id="toast-message"></p>
    </div>


    <script src="script.js"></script>
</body>
</html>